{% extends "base.html" %}

{% block title %}
My Applications
{% endblock %}

{% block content %}

<div class="min-h-screen bg-bg text-text-primary py-12">

    <div class="max-w-5xl mx-auto bg-surface p-8 rounded-xl border border-border">
        <h1 class="text-3xl font-bold text-primary mb-6">My Applications</h1>

        {% if applications %}
        
            <div class="space-y-4">
                {% for app in applications %}
                
                    <div class="p-5 bg-bg border border-border rounded-xl flex flex-col md:flex-row md:items-center justify-between gap-4">

                        <!-- Job Info -->
                        <div>
                            <h2 class="text-xl font-semibold text-primary">
                                {{ app.job.title }}
                            </h2>

                            <p class="text-text-secondary text-sm mt-1">
                                {{ app.job.company_name }} • {{ app.job.location }}
                            </p>

                            <p class="text-text-secondary text-xs mt-1">
                                Applied on: {{ app.applied_at|date:"F j, Y" }}
                            </p>
                        </div>

                        <!-- Status + View -->
                        <div class="flex items-center gap-4">

                            <!-- Status Badge -->
                            {% if app.status == "pending" %}
                                <span class="px-3 py-1 rounded-md bg-surface border border-border text-text-secondary text-sm">
                                    Pending
                                </span>
                            {% elif app.status == "accepted" %}
                                <span class="px-3 py-1 rounded-md bg-green-600/20 text-green-400 border border-green-600 text-sm">
                                    Accepted
                                </span>
                            {% elif app.status == "rejected" %}
                                <span class="px-3 py-1 rounded-md bg-error/20 text-error border border-error text-sm">
                                    Rejected
                                </span>
                            {% endif %}

                            <!-- View Job Button -->
                            <a href="{% url 'job_detail' app.job.slug %}"
                               class="px-5 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/80">
                                View Job
                            </a>

                        </div>

                    </div>

                {% endfor %}
            </div>

        {% else %}

            <div class="text-center py-20">
                <p class="text-text-secondary text-lg">You haven’t applied for any jobs yet.</p>
                <a href="{% url 'job_list' %}"
                   class="inline-block mt-6 px-6 py-2 bg-primary text-white rounded-lg font-semibold hover:bg-primary/80">
                    Browse Jobs
                </a>
            </div>

        {% endif %}
    </div>

</div>

{% endblock %}
